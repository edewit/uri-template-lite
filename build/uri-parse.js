!function(k){function c(a){this.init(this.template=a)}function d(a){return a.replace(n,"\\$&")}var p={"":",","+":",","#":",","?":"&"},n=/[.*+?^=!:${}()|\[\]\/\\]/g,q=new RegExp(/\{([+#.\/;?&]?)((?:[\w%.]+(\*|:\d)?,?)+)\}/g.source+"|.[^{]*?","g");c.prototype={init:function(a){var l=0,e="",c={};a="^"+a.replace(q,function(a,h,m){if(!m)return d(a);var f=p[h]||h,k=";"==f||"&"==f;a=m.split(",").map(function(a){var g="(.*?)",b=a==(a=a.split("*")[0])&&(b=a.split(":"),a=b[0],b[1]);l++;if(b)g="((?:%..|.){1,"+
b+"})",c[a]={pos:l,len:b};else if(b=c[a])g="(\\"+b.pos+".*?)";e+="t=($["+l+"]||'').split('"+f+"').map(decodeURIComponent);";e+='o["'+a+'"]=t.length>1?t:t[0];';return k?"&"==f?d(a+"=")+g:d(a)+"(?:="+g+")?":g}).join(d(f));return("+"!=h?d(h):"")+a})+"$";this.re=new RegExp(a);this.fn=new Function("$","var t,o={};"+e+"return o")},match:function(a){return(a=this.re.exec(a))&&this.fn(a)}};k.Template=c}(this.URI||(this.URI={}));
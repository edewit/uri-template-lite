!function(k){function c(a){return a.replace(n,"\\$&")}function d(a){this.init(this.template=a)}var p={"":",","+":",","#":",","?":"&"},n=/[.*+?^=!:${}()|\[\]\/\\]/g,q=new RegExp(/\{([+#.\/;?&]?)((?:[\w%.]+(\*|:\d)?,?)+)\}/g.source+"|.[^{]*?","g");d.prototype={init:function(a){var l=0,e="",d={};a="^"+a.replace(q,function(a,h,m){if(!m)return c(a);var f=p[h]||h,k=";"==f||"&"==f;a=m.split(",").map(function(a){var g="(.*?)",b=a==(a=a.split("*")[0])&&(b=a.split(":"),a=b[0],b[1]);l++;if(b)g="((?:%..|.){1,"+
b+"})",d[a]={pos:l,len:b};else if(b=d[a])g="(\\"+b.pos+".*?)";e+="t=($["+l+"]||'').split('"+f+"').map(decodeURIComponent);";e+='o["'+a+'"]=t.length>1?t:t[0];';return k?"&"==f?c(a+"=")+g:c(a)+"(?:="+g+")?":g}).join(c(f));return("+"!=h?c(h):"")+a})+"$";this.re=new RegExp(a);this.fn=new Function("$","var t,o={};"+e+"return o")},match:function(a){return(a=this.re.exec(a))&&this.fn(a)}};k.Template=d}(this.URI||(this.URI={}));
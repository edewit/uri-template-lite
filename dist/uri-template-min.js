!function(n){function t(a){return encodeURIComponent(a).replace(u,escape)}function v(a,f,d){return a+(f||"&"==d?"=":"")+f}function w(a){return"string"==typeof a}function e(a,f,d){a=a.map(f).filter(w);return a.length&&a.join(d)}function p(a,f){return a.replace(q,function(a,h,l){var c=r[h]||h,g=h&&","==c?encodeURI:t,k=(";"==c||"&"==c)&&v;return(a=e(l.split(","),function(a){var d=a!=(a=a.split("*")[0]),m=!d&&(m=a.split(":"),a=m[0],m[1]),b=f[a];if(null!=b){if("object"==typeof b){if(Array.isArray(b)?b=
e(b,g,d?k?c+a+"=":c:","):(b=e(Object.keys(b),function(a){return g(a)+(d?"=":",")+g(b[a])},d&&(k||"/"==c)?c:","),d&&(k=null)),!b)return}else b=g(m?b.slice(0,m):b);return k?k(a,b,c):b}},c))||""===a?"+"!=h?h+a:a:""})}function s(a){this.init(a);this.expand=p.bind(this,a)}function l(a){return a.replace(x,"\\$&")}var u=/[\]\[:\/?#@!$&()*+,;=']/g,r={"":",","+":",","#":",","?":"&"},x=/[.*+?^=!:${}()|\[\]\/\\]/g,q=/\{([+#.\/;?&]?)((?:[\w%.]+(\*|:\d)?,?)+)\}/g,y=new RegExp(q.source+"|.[^{]*?","g");n.expand=
p;s.prototype={init:function(a){var f=0,d="",h={},e="^"+a.replace(y,function(a,g,k){if(!k)return l(a);var e=r[g]||g,n=";"==e||"&"==e;a=k.split(",").map(function(a){var b="(.*?)",c=a==(a=a.split("*")[0])&&(c=a.split(":"),a=c[0],c[1]);f++;if(c)b="((?:%..|.){1,"+c+"})",h[a]={pos:f,len:c};else if(c=h[a])b="(\\"+c.pos+".*?)";d+="t=($["+f+"]||'').split('"+e+"').map(decodeURIComponent);";d+='o["'+a+'"]=t.length>1?t:t[0];';return n?"&"==e?l(a+"=")+b:l(a)+"(?:="+b+")?":b}).join(l(e));return("+"!=g?l(g):"")+
a})+"$";this.template=a;this.re=new RegExp(e);this.fn=new Function("$","var t,o={};"+d+"return o")},match:function(a){return(a=this.re.exec(a))&&this.fn(a)}};n.Template=s}(this.URI||(this.URI={}));

!function(f){function k(c){return encodeURIComponent(c).replace(n,escape)}function m(c,a,d){return c.map(a).filter(Boolean).join(d)}function p(c,a,d,f){a=f.split(",");var e=q[d]||d,h=d&&","==e?encodeURI:k,l=r[e]||null;a=a.map(function(a){var d,g=a!=(a=a.split("*")[0]),f=!g&&(d=a.split(":"),a=d[0],d[1]),b=c[a]||"";if(a in c){if(Array.isArray(b)){if(0==b.length)return;b=m(b,h,g?e+(";"==e||"&"==e?a+"=":""):",")}else if("object"==typeof b){var k=g?"=":",",b=m(Object.keys(b),function(a){return a in b&&
h(a)+k+h(b[a])},!g||"/"!=e&&";"!=e&&"&"!=e?",":e);if(0==b.length)return;g&&(l=null)}else b=h(f?b.slice(0,f):b);return l?l(a,b):b}}).filter(Boolean).join(e);return("+"!=d&&a?d:"")+a}var n=/[\]\[:\/?#@!$&()*+,;=']/g,s=/\{([+#.\/;?&]?)((?:[\w%.]+(\*|:\d)?,?)+)\}/g,q={"":",","+":",","#":",","?":"&"},r={";":function(c,a){return c+(a?"=":"")+a},"&":function(c,a){return c+"="+a}};f.expand=function(c,a){return c.replace(s,p.bind(null,a))}}(this);